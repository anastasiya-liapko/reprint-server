"use strict";$(function(){jQuery(function(e){e("#messageForm-phone").mask("+79999999999")});var a=["name","phone","email","message"],s={email:"Введите e-mail в формате default@mail.com",phone:"Введите номер телефона в формате +1234567890"},n=/\+7[0-9]{10}/,r=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,t=function(e){$("#messageFormValid-"+e.name).text(e.error),$("#messageForm-"+e.name).addClass("error")},i=function(e){$("#messageFormValid-"+e).text(""),$("#messageForm-"+e).removeClass("error")},o={},m={},c=function(t,e){if(m={},""===e)$.each(a,function(e,a){t===a&&(m={name:t,error:"Это обязательное поле"})});else switch(t){case"phone":m=n.test(e)?{}:{name:t,error:s[t]};break;case"email":m=r.test(e)?{}:{name:t,error:s[t]}}return m},l=function(e){$("form .submit").addClass("disabled"),$("form .submit").prop("disabled",!0)},h=function(e){var a,s,t=(a=$(e),s=!0,a.find("input").each(function(){o[$(this)[0].name]=$(this).val()}),a.find("textarea").each(function(){o[$(this)[0].name]=$(this).val()}),$.each(o,function(e,a){var t=c(e,a);0<Object.keys(t).length&&(s=!1)}),s);!!grecaptcha.getResponse().length&&t?($("form .submit").removeClass("disabled"),$("form .submit").prop("disabled",!1)):l()};$("#messageForm input").on("change keyup blur",function(){i($(this).attr("name"));var e=c($(this).attr("name"),$(this).val());0<Object.keys(e).length?(t(e),l()):h("#messageForm")}),$("#messageForm textarea").on("change keyup blur",function(){i($(this).attr("name"));var e=c($(this).attr("name"),$(this).val());0<Object.keys(e).length?(t(e),l()):h("#messageForm")}),window.recaptchaCallback2=function(){console.log("recaptcha callback2"),h("#messageForm")},$("#messageForm").submit(function(e){var a={};$(this).find("input").each(function(){a[$(this)[0].name]=$(this).val()}),$(this).find("textarea").each(function(){a[$(this)[0].name]=$(this).val()}),$.ajax({type:"POST",url:"form.php",data:a}).done(function(e){$("#messageFormValid-send").text("Сообщение отправлено!");var a=jQuery.parseJSON(e);console.log(a)}),e.preventDefault()})});